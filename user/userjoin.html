<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>마이소호 샘플샵</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="/css/header.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="stylesheet" href="/css/userjoin.css" />
  </head>
  <body>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <div class="wrap">
      <div class="betweenbtn">
        <script>
          $(".betweenbtn").load("/public-object/betweenbtn.html");
        </script>
      </div>

      <div class="header">
        <script>
          $(".header").load("/public-object/header.html");
        </script>
      </div>
      <!-- 회원가입 -->
      <div class="containerlogin">
        <div class="users-title-line-hd">
          <h2>회원가입</h2>
        </div>
        <div class="users-cont">
          <form action="frmLogin" method="post" action="/user/loginProcess">
            <input
              class="input-st01 users-login-input input-id"
              type="text"
              name="user_id"
              placeholder="아이디(5자~20자 이내)"
              value=""
              onBlur="checkTxt('id', this.value)"
              onchange="checkUserinfo('id', this.value)"
            />
            <div class="red check-txt check-txt-id">아이디를 입력해주세요</div>
            <div class="red check-txt check-txt-id2">
              아이디는 영문 또는 영문, 숫자를 포함하여 5자~20자 내로 입력
              가능합니다. (-,_를 제외한 특수 문자 입력 불가)
            </div>
            <div class="blue check-txt check-txt-id3">
              사용가능한 아이디입니다.
            </div>

            <input
              id="check-txt-pw"
              class="input-st01 users-login-input mt-10"
              type="password"
              name="user_password"
              placeholder="비밀번호 (영문,숫자,특수문자 조합 8자리 이상)"
              value=""
              onchange="checkUserinfo('pw', this.value)"
            />
            <div class="red check-txt check-txt-pw">
              올바른 비밀번호 형식이 아닙니다.
            </div>
            <div class="red check-txt check-txt-pw2">
              올바른 비밀번호 형식이 아닙니다.
            </div>
            <div class="blue check-txt check-txt-pw3">
              사용가능한 비밀번호 입니다.
            </div>
            <input
              id="check-txt-pwcheck"
              class="input-st01 users-login-input mt-10"
              type="password"
              name="user_password"
              placeholder="비밀번호 재입력"
              value=""
              onBlur="checkPW(this.value)"
              onchange="checkTxt('pw', this.value)"
            />
            <div class="blue check-txt check-txt-pwcheck-same">
              비밀번호가 일치합니다.
            </div>
            <div class="red check-txt check-txt-pwcheck-not">
              비밀번호가 일치하지 않습니다.
            </div>
            <input
              class="input-st01 users-login-input mt-10"
              type="text"
              name="user_name"
              placeholder="이름"
              onBlur="checkTxt('name', this.value)"
              onchange="checkUserinfo('name', this.value)"
            />
            <div class="red check-txt check-txt-name">이름을 입력해주세요</div>
            <div class="red check-txt check-txt-name2">
              2~5 길이의 한글로 입력해주세요.
            </div>
            <div class="blue check-txt check-txt-name3">가입 가능합니다.</div>
            <input
              class="input-st01 users-login-input mt-10"
              type="email"
              name="user_email"
              placeholder="이메일(비밀번호 찾기 시 이메일로 발송됩니다"
              value=""
              onBlur="checkTxt('email', this.value)"
              onchange="checkUserinfo('email', this.value)"
            />
            <div class="red check-txt check-txt-email">
              이메일 주소를 입력하세요.
            </div>
            <div class="red check-txt check-txt-email2">
              이메일 형식을 확인 해주세요.
            </div>
            <div class="blue check-txt check-txt-email3">
              가입 가능한 이메일입니다.
            </div>
            <input
              class="input-st01 users-login-input mt-10"
              type="text"
              name="user_mobileNumber"
              placeholder="휴대폰번호"
              onBlur="checkTxt('phone', this.value)"
              onchange="checkUserinfo('phone', this.value)"
            />
            <div class="red check-txt check-txt-phone">
              전화번호를 입력 해주세요
            </div>
            <div class="red check-txt check-txt-phone2">
              전화번호 형식을 확인 해주세요.
            </div>
            <div class="blue check-txt check-txt-phone3">
              사용가능한 전화번호입니다.
            </div>
          </form>
          <div>
            <!-- 이용약관 -->
            <ul class="users-cont-full">
              <li>
                <div>
                  <input
                    name="ckeck1"
                    type="checkbox"
                    id="agreeAllBtn"
                    onclick="onclickAgree()"
                  />
                  <label for="check1"></label>
                  <div class="cbx-content"><b>전체 동의</b></div>
                </div>
              </li>
              <div class="agree">
                <li>
                  <div>
                    <input name="ckeck1" type="checkbox" />
                    <label for="check1"></label>
                    <div class="cbx-content cbx-content-li">
                      이용약관 동의 (필수)
                    </div>
                  </div>
                  <a href="javascript:openPopup3()" class="btn-agree"> 보기 </a>
                </li>
                <li>
                  <div>
                    <input name="ckeck1" type="checkbox" />
                    <label for="check1"></label>
                    <div class="cbx-content cbx-content-li">
                      개인정보 수집ㆍ이용 동의 (필수)
                    </div>
                  </div>
                  <a href="javascript:openPopup4()" class="btn-agree"> 보기 </a>
                </li>
                <li>
                  <div>
                    <input name="ckeck1" type="checkbox" />
                    <label for="check1"></label>
                    <div class="cbx-content cbx-content-li">
                      개인정보 수집ㆍ이용 동의 (선택)
                    </div>
                  </div>
                  <a href="javascript:openPopup4()" class="btn-agree"> 보기 </a>
                </li>
              </div>
              <button
                class="mt-40"
                type="submit"
                id="join"
                class="btn-h42-gray mt-10"
                onclick="join()"
              >
                가입하기
              </button>
            </ul>
          </div>
        </div>
      </div>
      <!-- 푸터 -->
      <div class="footer">
        <script>
          $(".footer").load("/public-object/footer.html");
        </script>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
      integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
      crossorigin="anonymous"
    ></script>
    <script src="/js/header.js"></script>
    <script src="/js/footer.js"></script>
    <script>
      let agree = document.querySelectorAll(".agree input");
      let agreeAllBtn = document.querySelector("#agreeAllBtn");

      function onclickAgree() {
        if (agreeAllBtn.checked === true) {
          for (let tag of agree) {
            tag.checked = true;
          }
        } else {
          for (let tag of agree) {
            tag.checked = false;
          }
        }
      }
      // 회원가입 정보 미입력 시 멘트
      function checkTxt(type, val) {
        // 입력값이 공백일 때
        if (val === "") {
          document.querySelector(".check-txt-" + type).style.display = "block";
          document.querySelector(".check-txt-" + type + "2").style.display =
            "none";
          document.querySelector(".check-txt-" + type + "3").style.display =
            "none";
        } else {
          document.querySelector(".check-txt-" + type).style.display = "none";
        }
      }
      function checkPW(val) {
        // 비밀번호 확인
        if (val === document.querySelector("#check-txt-pw").value) {
          document.querySelector(".check-txt-pwcheck-same").style.display =
            "block";
          document.querySelector(".check-txt-pwcheck-not").style.display =
            "none";
        } else {
          document.querySelector(".check-txt-pwcheck-same").style.display =
            "none";
          document.querySelector(".check-txt-pwcheck-not").style.display =
            "block";
        }
      }
      function checkUserinfo(type, val) {
        let mode = "";

        var ckeckId = /^[a-zA-z0-9]{4,12}$/; //아이디 유효성 검사
        var ckeckPW = /(?=.*[0-9])(?=.*[a-z])(?=.*\W)(?=\S+$).{8,20}/; //비밀번호 유효성 검사
        var ckeckName = /^[가-힣]{2,5}$/; //이름 유효성 검사
        var ckeckEmail = /^[A-Za-z0-9_\.\-]+@[A-Za-z0-9\-]+\.[A-Za-z0-9\-]+$/; //이메일 유효성 검사
        var ckeckPhone = /^[0-9]{10,11}$/; //이메일 유효성 검사
        if (type === "id") {
          mode = ckeckId;
        } else if (type === "pw") {
          mode = ckeckPW;
        } else if (type === "name") {
          mode = ckeckName;
        } else if (type === "email") {
          mode = ckeckEmail;
        } else if (type === "phone") {
          mode = ckeckPhone;
        }

        if (!mode.test(val)) {
          document.querySelector(".check-txt-" + type).style.display = "none";
          document.querySelector(".check-txt-" + type + "2").style.display =
            "block";
          document.querySelector(".check-txt-" + type + "3").style.display =
            "none";
          document.querySelector(".input-" + type).focus();
        } else {
          document.querySelector(".check-txt-" + type).style.display = "none";
          document.querySelector(".check-txt-" + type + "2").style.display =
            "none";
          document.querySelector(".check-txt-" + type + "3").style.display =
            "block";
        }
      }
      function join() {
        alert("축하합니다 회원가입하셨습니다.");
        location.href = "userlogin.html";
      }
    </script>
  </body>
</html>
